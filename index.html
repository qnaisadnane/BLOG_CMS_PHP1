<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blog CMS</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50">
    <!-- Login Screen -->
    <div id="loginScreen" class="min-h-screen flex items-center justify-center px-4">
        <div class="max-w-md w-full bg-white rounded-lg shadow-lg p-8">
            <h1 class="text-3xl font-bold text-gray-900 mb-6 text-center">Blog CMS</h1>
            <form id="loginForm" class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Username</label>
                    <input type="text" id="username" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Password</label>
                    <input type="password" id="password" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                </div>
                <button type="submit" class="w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 transition">Login</button>
                <p class="text-sm text-gray-600 text-center mt-4">Demo: admin / admin123</p>
            </form>
        </div>
    </div>

    <!-- CMS Dashboard -->
    <div id="cmsScreen" class="hidden">
        <!-- Header -->
        <header class="bg-white shadow-sm">
            <div class="max-w-7xl mx-auto px-4 py-4 flex justify-between items-center">
                <h1 class="text-2xl font-bold text-gray-900">Blog CMS</h1>
                <button id="logoutBtn" class="bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition">Logout</button>
            </div>
        </header>

        <div class="max-w-7xl mx-auto px-4 py-8">
            <!-- Create Post Form -->
            <div class="bg-white rounded-lg shadow-lg p-6 mb-8">
                <h2 class="text-xl font-bold text-gray-900 mb-4">Create New Post</h2>
                <form id="postForm" class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Title</label>
                        <input type="text" id="postTitle" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Content</label>
                        <textarea id="postContent" rows="6" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" required></textarea>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Category</label>
                        <input type="text" id="postCategory" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="e.g., Technology, Travel, Food">
                    </div>
                    <button type="submit" class="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition">Publish Post</button>
                </form>
            </div>

            <!-- Posts List -->
            <div class="bg-white rounded-lg shadow-lg p-6">
                <h2 class="text-xl font-bold text-gray-900 mb-4">Published Posts</h2>
                <div id="postsList" class="space-y-4"></div>
            </div>
        </div>
    </div>

    <!-- Blog View -->
    <div id="blogScreen" class="hidden">
        <header class="bg-white shadow-sm">
            <div class="max-w-4xl mx-auto px-4 py-6">
                <h1 class="text-3xl font-bold text-gray-900">My Blog</h1>
                <button id="backToCms" class="mt-2 text-blue-600 hover:text-blue-700">‚Üê Back to CMS</button>
            </div>
        </header>
        <div class="max-w-4xl mx-auto px-4 py-8">
            <div id="blogPosts" class="space-y-8"></div>
        </div>
    </div>

    <script>
        // State management
        let posts = [];
        let isLoggedIn = false;
        let editingPostId = null;

        // Elements
        const loginScreen = document.getElementById('loginScreen');
        const cmsScreen = document.getElementById('cmsScreen');
        const blogScreen = document.getElementById('blogScreen');
        const loginForm = document.getElementById('loginForm');
        const postForm = document.getElementById('postForm');
        const logoutBtn = document.getElementById('logoutBtn');
        const backToCms = document.getElementById('backToCms');

        // Load posts from memory
        function loadPosts() {
            const saved = posts;
            if (saved.length === 0) {
                posts = [
                    {
                        id: Date.now(),
                        title: "Welcome to Your Blog CMS",
                        content: "This is your first blog post. You can edit or delete it from the CMS dashboard.",
                        category: "Welcome",
                        date: new Date().toISOString()
                    }
                ];
            }
        }

        // Login handler
        loginForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;

            // Simple authentication (demo purposes)
            if (username === 'admin' && password === 'admin123') {
                isLoggedIn = true;
                showCMS();
            } else {
                alert('Invalid credentials. Try: admin / admin123');
            }
        });

        // Logout handler
        logoutBtn.addEventListener('click', () => {
            isLoggedIn = false;
            loginScreen.classList.remove('hidden');
            cmsScreen.classList.add('hidden');
            blogScreen.classList.add('hidden');
            loginForm.reset();
        });

        // Post form handler
        postForm.addEventListener('submit', (e) => {
            e.preventDefault();
            
            const title = document.getElementById('postTitle').value;
            const content = document.getElementById('postContent').value;
            const category = document.getElementById('postCategory').value;

            if (editingPostId) {
                // Update existing post
                const postIndex = posts.findIndex(p => p.id === editingPostId);
                posts[postIndex] = {
                    ...posts[postIndex],
                    title,
                    content,
                    category
                };
                editingPostId = null;
            } else {
                // Create new post
                const newPost = {
                    id: Date.now(),
                    title,
                    content,
                    category,
                    date: new Date().toISOString()
                };
                posts.unshift(newPost);
            }

            postForm.reset();
            renderPosts();
        });

        // Show CMS
        function showCMS() {
            loginScreen.classList.add('hidden');
            cmsScreen.classList.remove('hidden');
            blogScreen.classList.add('hidden');
            renderPosts();
        }

        // Show blog view
        function showBlog() {
            loginScreen.classList.add('hidden');
            cmsScreen.classList.add('hidden');
            blogScreen.classList.remove('hidden');
            renderBlogView();
        }

        backToCms.addEventListener('click', showCMS);

        // Render posts in CMS
        function renderPosts() {
            const postsList = document.getElementById('postsList');
            
            if (posts.length === 0) {
                postsList.innerHTML = '<p class="text-gray-500">No posts yet. Create your first post above!</p>';
                return;
            }

            postsList.innerHTML = posts.map(post => `
                <div class="border border-gray-200 rounded-lg p-4">
                    <div class="flex justify-between items-start mb-2">
                        <h3 class="text-lg font-semibold text-gray-900">${post.title}</h3>
                        <div class="flex gap-2">
                            <button onclick="editPost(${post.id})" class="text-blue-600 hover:text-blue-700 text-sm">Edit</button>
                            <button onclick="deletePost(${post.id})" class="text-red-600 hover:text-red-700 text-sm">Delete</button>
                        </div>
                    </div>
                    <p class="text-gray-600 mb-2">${post.content.substring(0, 150)}${post.content.length > 150 ? '...' : ''}</p>
                    <div class="flex justify-between items-center text-sm text-gray-500">
                        <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded">${post.category || 'Uncategorized'}</span>
                        <span>${new Date(post.date).toLocaleDateString()}</span>
                    </div>
                </div>
            `).join('');
        }

        // Render blog view
        function renderBlogView() {
            const blogPosts = document.getElementById('blogPosts');
            
            if (posts.length === 0) {
                blogPosts.innerHTML = '<p class="text-gray-500">No posts published yet.</p>';
                return;
            }

            blogPosts.innerHTML = posts.map(post => `
                <article class="bg-white rounded-lg shadow-lg p-6">
                    <h2 class="text-2xl font-bold text-gray-900 mb-2">${post.title}</h2>
                    <div class="flex gap-3 text-sm text-gray-500 mb-4">
                        <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded">${post.category || 'Uncategorized'}</span>
                        <span>${new Date(post.date).toLocaleDateString()}</span>
                    </div>
                    <p class="text-gray-700 whitespace-pre-wrap">${post.content}</p>
                </article>
            `).join('');
        }

        // Edit post
        window.editPost = function(id) {
            const post = posts.find(p => p.id === id);
            if (post) {
                document.getElementById('postTitle').value = post.title;
                document.getElementById('postContent').value = post.content;
                document.getElementById('postCategory').value = post.category || '';
                editingPostId = id;
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        };

        // Delete post
        window.deletePost = function(id) {
            if (confirm('Are you sure you want to delete this post?')) {
                posts = posts.filter(p => p.id !== id);
                renderPosts();
            }
        };

        // Add view blog button to CMS
        const header = cmsScreen.querySelector('header .max-w-7xl');
        const viewBlogBtn = document.createElement('button');
        viewBlogBtn.textContent = 'View Blog';
        viewBlogBtn.className = 'bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition';
        viewBlogBtn.addEventListener('click', showBlog);
        header.insertBefore(viewBlogBtn, logoutBtn);

        // Initialize
        loadPosts();
        
        // Auto-login (bypass login screen)
        isLoggedIn = true;
        showCMS();
    </script>
</body>
</html>